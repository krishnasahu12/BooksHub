<center>

<%= link_to 'Back', books_path, class: "btn btn-primary mb-2" %><br><br>

<% if @book.images.attached? %>
    <% @book.images.each do |image| %>
     <%= image_tag image %><br>
    <% end %>
<% end %>
<br><br>
<b> BOOK NAME : <%= @book.book_name %> </b><br>
<b> PRICE :  &#8377; <%=  @book.price %> </b><br><br>

<% if user_signed_in? && current_user.cart.cart_items.find_by(book_id: @book.id).present?%>
  <%=  link_to "Add to Cart", cart_items_path, class: "btn btn-primary", data: {bs_target: "#CartForm", bs_toggle: "modal", remote: true}%>
<% elsif user_signed_in? %>
 <%= link_to "Add to Cart", cart_cart_item_path(id: @book), class: "btn btn-primary", data: {bs_target: "#CartForm", bs_toggle: "modal", remote:true}, method: :post%>
<% else %>
  <%=  link_to "Add to Cart", user_session_path, class: "btn btn-primary" %>
<% end %>
    

<div class="modal fade" id="CartForm" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="CartFormLabel">Cart</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div id="CartViewForm">
      ..
      </div>
    </div>
  </div>
</div>
</div>
